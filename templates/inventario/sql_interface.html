{% extends "inventario/base.html" %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Interfaz de Comandos SQL</h2>
    
    <div class="alert alert-warning" role="alert">
        <strong>⚠️ ¡Atención!</strong> Esta herramienta ejecuta comandos directamente en la base de datos. Úsala con extrema precaución.
    </div>
    
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            {{ form.sql_query.label_tag }}
            {{ form.sql_query }}
            <small class="form-text text-muted">{{ form.sql_query.help_text }}</small>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Ejecutar Consulta</button>
    </form>
    
    {% if error %}
        <div class="alert alert-danger mt-4" role="alert">
            <strong>Error:</strong> {{ error }}
        </div>
    {% endif %}
    
    {% if results %}
        <h3 class="mt-5">Resultados</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mt-3">
                <thead class="thead-dark">
                    <tr>
                        {% for col in columns %}
                            <th>{{ col }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in results %}
                        <tr>
                            {% for item in row %}
                                <td>{{ item }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>
{% endblock %}
